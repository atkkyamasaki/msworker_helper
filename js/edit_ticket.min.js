function _emailCheckRemove(){$(emailNew).prop("checked",!1),$(emailAttach).prop("checked",!1),$(onlyEmailAttach).prop("checked",!1)}function _radioStatusChange(t){var e=[emailNew,emailAttach,onlyEmailAttach];"enable"==t?$.each(e,function(t,e){$(e).prop("disabled",!1),$(e).removeClass("radio_disabled").addClass("radio_enabled")}):$.each(e,function(t,e){$(e).prop("disabled",!0),$(e).removeClass("radio_enabled").addClass("radio_disabled")})}function _checkCloseStatus(){"CL"==$(statusId).val()?($(bugId).val()||($(bugId).addClass("title_warning"),bugCheckFrag=!1),$(waitGaReleaseId).val()||($(waitGaReleaseId).addClass("title_warning"),waitGaReleaseCheckFrag=!1),$(solutionId).val()||($(solutionId).addClass("title_warning"),solutionCheckFrag=!1),$(problemSummaryId).val()||($(problemSummaryId).addClass("title_warning"),problemSummaryCheckFrag=!1),$(solutionDescriptionId).val()||($(solutionDescriptionId).addClass("title_warning"),solutionDescriptionCheckFrag=!1),$(workaroundId).val()||($(workaroundId).addClass("title_warning"),workaroundCheckFrag=!1)):($(bugId).removeClass("title_warning"),bugCheckFrag=!0,$(waitGaReleaseId).removeClass("title_warning"),waitGaReleaseCheckFrag=!0,$(solutionId).removeClass("title_warning"),solutionCheckFrag=!0,$(problemSummaryId).removeClass("title_warning"),problemSummaryCheckFrag=!0,$(solutionDescriptionId).removeClass("title_warning"),solutionDescriptionCheckFrag=!0,$(workaroundId).removeClass("title_warning"),workaroundCheckFrag=!0)}function _addColumColorClass(t,e){var a=e+"MessageColum",n=e+"MessageBody";t.each(function(t,e){$(e).addClass(a),$(e).parent("tr").next("tr").children("td").is(":contains('Attachment:')")?$(e).parent("tr").next("tr").next("tr").children("td").addClass(n):$(e).parent("tr").next("tr").children("td").addClass(n)})}function _beforeSubmitPopUp(t,e){var e=$('input[name="ctl00$MainContent$UC_AddComment$G_DescriptionType"]:checked').val();if("RB_Internal"==e)return _submitOrBackClick(t),!0;var a=_createConfirmMsg(e);$.confirm({title:"[Confirm]",content:a,buttons:{ok:function(){return _submitOrBackClick(t),!0},cancel:function(){return!0}}})}function _createConfirmMsg(t){var e=$('input[name="ctl00$MainContent$UC_AddComment$CB_NeedSendEmail"]').prop("checked"),a=$('input[name="ctl00$MainContent$UC_AddComment$CB_NeedEmailAttachment"]').prop("checked"),n=$('input[name="ctl00$MainContent$UC_AddComment$CB_AttachToEmailOnly"]').prop("checked"),o="";e?(o="Email New Comment",a&&(o+="<br>Email Attachment(s)"),n&&(o+="<br>Only Email Attachment(s)")):a?(o="Email Attachment(s)",n&&(o+="<br>Only Email Attachment(s)")):n&&(o="Only Email Attachment(s)");var i='<div style="color: lightgreen; font-size:1.5em">=== Title/Status ===</div>Title   :   '+$(titleId).val()+"<br>Status   :   "+$("[name='ctl00$MainContent$DDL_TicketStatus'] option:selected").text()+'<br><br><div style="color: lightgreen; font-size:1.5em">=== Output ===</div>'+t+'<br><br><div style="color: lightgreen; font-size:1.5em">=== Email ===</div>email From  :  '+$(emailFrom).val()+"<br>email To  :  "+$(emailTo).val()+"<br>email Bcc  :  "+$(emailBcc).val()+'<br><br><div style="color: lightgreen; font-size:1.5em">=== Action ===</div>'+o+"<br><br>";return titleCheckFrag&&statusChangeFrag&&partnerRatingCheckFrag&&bugCheckFrag&&waitGaReleaseCheckFrag&&solutionCheckFrag&&problemSummaryCheckFrag&&solutionDescriptionCheckFrag&&workaroundCheckFrag||(i+='<div style="color: red; font-size:1.5em">!!!!! Caution !!!!!</div>',titleCheckFrag||(i+="+ Title header is irregularity!<br>"),statusChangeFrag||(i+="+ You didn't change  Status!<br>"),partnerRatingCheckFrag||(i+="+ Partner Rating is empty!<br>"),bugCheckFrag||(i+="+ Bug ID is empty! (But, not required)<br>"),waitGaReleaseCheckFrag||(i+="+ Wait GA Release is empty! (But, not required)<br>"),solutionCheckFrag||(i+="+ Solution is empty!<br>"),problemSummaryCheckFrag||(i+="+ Problem Summary is empty!<br>"),solutionDescriptionCheckFrag||(i+="+ Solution Description is empty!<br>"),workaroundCheckFrag||(i+="+ Workaround is empty! (But, not required)<br>"),i+="<br>Please check before you submit.<br>"),i}function _submitOrBackClick(t){switch(t){case"submit":$(submitButton).click();break;case"submit_back":$(submitBackButton).click()}}function _createMasterInfoString(t){if(t)var e=$("#Table5 > tbody > tr > td > table > tbody > tr:nth-child(2) > td > table > tbody > tr:nth-child(3) > td > table > tbody > tr > td");else var e=$("#Table5 > tbody > tr > td > table > tbody > tr:nth-child(2) > td > table > tbody > tr:nth-child(2) > td > table > tbody > tr > td");if(e.is(":contains('Master info')"))var a=e.text(),n=a.substring(a.indexOf("Master info"),a.indexOf("End User")),o=n.substring(n.indexOf("Partner name"),n.indexOf("Person in charge")).replace("Partner name",""),i=n.substring(n.indexOf("Person in charge"),n.indexOf("E-mail")).replace("Person in charge",""),r=n.substring(n.indexOf("E-mail"),n.indexOf("Phone")).replace("E-mail",""),l=n.substring(n.indexOf("Phone")).replace("Phone",""),s='<p class="post_it_item">'+_sortMasterInfoString(o)+'</p><p class="post_it_item">'+_sortMasterInfoString(i)+'</p><p class="post_it_item">'+_sortMasterInfoString(r)+'</p><p class="post_it_item">'+_sortMasterInfoString(l)+"</p>";else var s="<p class=\"post_it_item\">keyword 'Master Info' can't find</p>";return s}function _sortMasterInfoString(t){var e=t.trim();return e=e.replace(/:/g,""),e=e.replace(/ï¼š/g,""),e=e.replace(/\*/g,""),"-"==e.slice(-1)&&(e=e.slice(0,-1)),e=e.trim()}var messageColor=!0,productSummary=!0,customerSummary=!0,duration=!0,durationFooter=!0,userAgent=window.navigator.userAgent.toLowerCase();isSupported(["chrome","opera"])&&chrome.storage.sync.get(["messageColor","productSummary","customerSummary","duration","durationFooter"],function(t){messageColor=t.messageColor,productSummary=t.productSummary,customerSummary=t.customerSummary,duration=t.duration,durationFooter=t.durationFooter});var titleId="#ctl00_MainContent_TB_TicketTitle",titleCheckFrag=!1,statusId="#ctl00_MainContent_DDL_TicketStatus",statusChangeFrag=!1,partnerRatingId="#ctl00_MainContent_UC_PartnerRating_DDL_NoDocs",partnerRatingCheckFrag=!0,bugId="#ctl00_MainContent_TB_BugId",bugCheckFrag=!0,waitGaReleaseId="#ctl00_MainContent_TB_WaitGARelease",waitGaReleaseCheckFrag=!0,solutionId="#ctl00_MainContent_DDL_Solution",solutionCheckFrag=!0,problemSummaryId="#ctl00_MainContent_TB_ProDesc",problemSummaryCheckFrag=!0,solutionDescriptionId="#ctl00_MainContent_T_SolutinText",solutionDescriptionCheckFrag=!0,workaroundId="#ctl00_MainContent_TB_Workaround",workaroundCheckFrag=!0,categoryProductId="[name='ctl00$MainContent$UC_CategorySelector$DDL_ProductType'] option:selected",categoryContentId="[name='ctl00$MainContent$UC_CategorySelector$DDL_Category'] option:selected",serialNumberId="#ctl00_MainContent_txtSN",swVersionId="[name='ctl00$MainContent$UC_Version$DDL_SWVersion'] option:selected",swPatchId="[name='ctl00$MainContent$DDL_Build'] option:selected",internalButton="#ctl00_MainContent_UC_AddComment_RB_Internal",externalButton="#ctl00_MainContent_UC_AddComment_RB_EXternal",notepadButton="#ctl00_MainContent_UC_AddComment_RB_NotePad",emailNew="#ctl00_MainContent_UC_AddComment_CB_NeedSendEmail",emailAttach="#ctl00_MainContent_UC_AddComment_CB_NeedEmailAttachment",onlyEmailAttach="#ctl00_MainContent_UC_AddComment_CB_AttachToEmailOnly",emailFrom="#ctl00_MainContent_UC_AddComment_TB_EmailFrom",emailTo="#ctl00_MainContent_UC_AddComment_TB_EmailTo",emailCc="#ctl00_MainContent_UC_AddComment_TB_EmailCC",emailBcc="#ctl00_MainContent_UC_AddComment_TB_EmailBCC",submitButton="#ctl00_MainContent_B_TicketSubmit",submitBackButton="#ctl00_MainContent_B_SubmitAndBack",newSubmitButton="#new_ctl00_MainContent_B_TicketSubmit",newSubmitBackButton="#new_ctl00_MainContent_B_SubmitAndBack";$(function(){$("#aspnetForm > div:nth-child(13) > table:nth-child(1)").after('<p class="plugin_working">FortiCare Custom Plugin Working now...</p>')}),$(function(){_emailCheckRemove(),$(emailBcc).val("support_jp@fortinet.com"),_radioStatusChange("disable")}),$(function(){$(internalButton).click(function(){_emailCheckRemove(),_radioStatusChange("disable"),$(internalButton).text("Update (Internal)")})}),$(function(){var t=[externalButton,notepadButton];$.each(t,function(t,e){$(e).click(function(){_radioStatusChange("enable"),e==externalButton?$(newSubmitButton).text("Update (External)"):$(newSubmitButton).text("Update (NotePad)")})})}),$(function(){$(statusId).addClass("title_warning"),$(document).on("change",statusId,function(){$(statusId).removeClass("title_warning"),statusChangeFrag=!0,_checkCloseStatus()}),$(document).on("keyup",bugId,function(){"CL"==$(statusId).val()&&($(bugId).val()?($(bugId).removeClass("title_warning"),bugCheckFrag=!0):$(bugId).hasClass("title_warning")||($(bugId).addClass("title_warning"),bugCheckFrag=!1))}),$(document).on("keyup",waitGaReleaseId,function(){"CL"==$(statusId).val()&&($(waitGaReleaseId).val()?($(waitGaReleaseId).removeClass("title_warning"),waitGaReleaseCheckFrag=!0):$(waitGaReleaseId).hasClass("title_warning")||($(waitGaReleaseId).addClass("title_warning"),waitGaReleaseCheckFrag=!1))}),$(document).on("change",solutionId,function(){"CL"==$(statusId).val()&&($(solutionId).val()?($(solutionId).removeClass("title_warning"),solutionCheckFrag=!0):($(solutionId).addClass("title_warning"),solutionCheckFrag=!1))}),$(document).on("keyup",problemSummaryId,function(){"CL"==$(statusId).val()&&($(problemSummaryId).val()?($(problemSummaryId).removeClass("title_warning"),problemSummaryCheckFrag=!0):$(problemSummaryId).hasClass("title_warning")||($(problemSummaryId).addClass("title_warning"),problemSummaryCheckFrag=!1))}),$(document).on("keyup",solutionDescriptionId,function(){"CL"==$(statusId).val()&&($(solutionDescriptionId).val()?($(solutionDescriptionId).removeClass("title_warning"),solutionDescriptionCheckFrag=!0):$(solutionDescriptionId).hasClass("title_warning")||($(solutionDescriptionId).addClass("title_warning"),solutionDescriptionCheckFrag=!1))}),$(document).on("keyup",workaroundId,function(){"CL"==$(statusId).val()&&($(workaroundId).val()?($(workaroundId).removeClass("title_warning"),workaroundCheckFrag=!0):$(workaroundId).hasClass("title_warning")||($(workaroundId).addClass("title_warning"),workaroundCheckFrag=!1))})}),$(function(){""==$(partnerRatingId).val()&&($(partnerRatingId).addClass("title_warning"),partnerRatingCheckFrag=!1),$(document).on("change",partnerRatingId,function(){""==$(partnerRatingId).val()?($(partnerRatingId).addClass("title_warning"),partnerRatingCheckFrag=!1):($(partnerRatingId).removeClass("title_warning"),partnerRatingCheckFrag=!0)})}),$(function(){var t=$(titleId).val();t.match(/^#[a-zA-Z]{2}-[a-zA-Z]+#.*\[.*\].*/)||t.match(/^#[a-zA-Z]{2}#.*\[.*\].*/)?titleCheckFrag=!0:($(titleId).addClass("title_warning"),$(titleId).after('<span id="title_err_msg" class="title_err_msg fa fa-exclamation-triangle">  Please check <a href="http://lab.jp.fortinet.com/dokuwiki/tac:workbook:forticare_ticket_naming" target="_blank">wiki</a> about input rules of title</span>'),titleCheckFrag=!1),$(document).on("keyup",titleId,function(){var t=$(titleId).val();t.match(/^#[a-zA-Z]{2}-[a-zA-z]+#.*\[.*\].*/)||t.match(/^#[a-zA-Z]{2}#.*\[.*\].*/)?($(titleId).removeClass("title_warning"),$("#title_err_msg").remove(),titleCheckFrag=!0):$(titleId).hasClass("title_warning")||($(titleId).addClass("title_warning"),$(titleId).after('<span id="title_err_msg" class="title_err_msg fa fa-exclamation-triangle">  Please check <a href="http://lab.jp.fortinet.com/dokuwiki/tac:workbook:forticare_ticket_naming" target="_blank">wiki</a> about input rules of title</span>'),titleCheckFrag=!1)})}),$(function(){if(messageColor){var t=$("#Table5 > tbody > tr > td > table > tbody > tr:nth-child(2) > td > table > tbody > tr > td:contains('External Message')");_addColumColorClass(t,"external");var e=$("#Table5 > tbody > tr > td > table > tbody > tr:nth-child(2) > td > table > tbody > tr > td:contains('Internal Message')");_addColumColorClass(e,"internal");var a=$("#Table5 > tbody > tr > td > table > tbody > tr:nth-child(2) > td > table > tbody > tr > td:contains('Partner Message')"),n=$("#Table5 > tbody > tr > td > table > tbody > tr:nth-child(2) > td > table > tbody > tr > td:contains('Customer Message')");_addColumColorClass(a,"partner"),_addColumColorClass(n,"partner")}}),$(function(){$(submitButton).hide(),$(submitBackButton).hide(),$(submitButton).parent("td").after('<td><span id="new_ctl00_MainContent_B_TicketSubmit" class="new_update_btn">Update (Internal)</span></td>'),$(submitBackButton).parent("td").after('<td><span id="new_ctl00_MainContent_B_SubmitAndBack" class="new_update_btn" style="width:120px">Update & Back</span></td>')}),$(function(){$(document).on("click","#new_ctl00_MainContent_B_TicketSubmit",function(){_beforeSubmitPopUp("submit")}),$(document).on("click","#new_ctl00_MainContent_B_SubmitAndBack",function(){_beforeSubmitPopUp("submit_back")})}),$(function(){var t=$(categoryProductId).text(),e=$(categoryContentId).text(),a=$(serialNumberId).val(),n=$(swVersionId).text(),o=$(swPatchId).text(),i='<div id="summary_note" class="post_it">[Summary]<p class="post_it_item">Category : '+t+'</p><p class="post_it_item">Type : '+e+'</p><p class="post_it_item">S/N : '+a+'</p><p class="post_it_item">Version : '+n+o+"</p></div>";productSummary&&$("body").after(i);var r=$("#Table5 > tbody > tr > td > table > tbody > tr:nth-child(2) > td > table > tbody > tr:nth-child(1) > td");if(r.parent("tr").next("tr").children("td").is(":contains('Attachment:')"))var l=_createMasterInfoString(!0);else var l=_createMasterInfoString(!1);var s='<div id="master_info_note" class="post_it">[Master Information]'+l+"</div>";customerSummary&&$("body").after(s),$(document).on("click","#summary_note",function(){$(this).toggleClass("post_it_close")}),$(document).on("click","#master_info_note",function(){$(this).toggleClass("post_it_close")})}),$(function(){duration&&$("#ctl00_MainContent_P_Ticket_Content > table:nth-child(12) > tbody > tr > td:nth-child(7)").after('<p id="open_time">Duration:<span id="open_time_count"></span>s</p>'),durationFooter&&$("body").after('<p id="open_time_footer">Duration:<span id="open_time_count_footer"></span>s</p>');var t=0;setInterval(function(){$("#open_time_count,#open_time_count_footer").text(++t)},1e3)}),$(function(){$("body").after('<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">')}),$(function(){$("body").after('<p id="page-top" class="page_top_bottom"><a href="#wrap">PAGE TOP</a></p>'),$("body").after('<p id="page-bottom" class="page_top_bottom"><a href="#wrap">PAGE BOTTOM</a></p>')}),$(function(){var t=!1,e=!1,a=$("#page-top"),n=$("#page-bottom");a.css("bottom","-100px"),n.css("bottom","-100px");var t=!1;$(window).scroll(function(){$(this).scrollTop()>200?0==t&&(t=!0,a.stop().animate({bottom:"62px"},200)):t&&(t=!1,a.stop().animate({bottom:"-100px"},200))}),a.click(function(){return $("body,html").animate({scrollTop:0},500),!1});var e=!1;$(window).scroll(function(){1200<$(document).height()-$(this).scrollTop()?0==e&&(e=!0,n.stop().animate({bottom:"20px"},200)):e&&(e=!1,n.stop().animate({bottom:"-100px"},200))}),n.click(function(){return $("body,html").animate({scrollTop:$(document).height()},500),!1})});